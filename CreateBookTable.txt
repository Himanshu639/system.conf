-- Create Books table
CREATE TABLE Books (
  AccNo NUMBER,
  Title VARCHAR2(100),
  Author VARCHAR2(50),
  Publisher VARCHAR2(50),
  Count NUMBER
);

-- Create Library_Audit table
CREATE TABLE Library_Audit (
  AccNo NUMBER,
  Title VARCHAR2(100),
  Author VARCHAR2(50),
  Publisher VARCHAR2(50),
  Count NUMBER,
  Audit_Type VARCHAR2(10),
  Audit_Date DATE
);

-- Create a BEFORE DELETE trigger
CREATE OR REPLACE TRIGGER before_delete_trigger
BEFORE DELETE ON Books
FOR EACH ROW
BEGIN
  INSERT INTO Library_Audit
  VALUES (:OLD.AccNo, :OLD.Title, :OLD.Author, :OLD.Publisher, :OLD.Count, 'DELETE', SYSDATE);
END;
/

-- Create an AFTER UPDATE trigger
CREATE OR REPLACE TRIGGER after_update_trigger
AFTER UPDATE ON Books
FOR EACH ROW
BEGIN
  INSERT INTO Library_Audit
  VALUES (:NEW.AccNo, :NEW.Title, :NEW.Author, :NEW.Publisher, :NEW.Count, 'UPDATE', SYSDATE);
END;
/